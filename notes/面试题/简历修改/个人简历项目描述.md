参考链接：https://javaguide.cn/interview-preparation/resume-guide.html#%E4%B8%93%E4%B8%9A%E6%8A%80%E8%83%BD







项目优化示例：

- 利用 **Caffeine** 实现了本地缓存，优化了热门分享内容的访问，单机可达 8000QPS。使用定时线程池保证**数据一致性**

- 使用 HyperLogLog、**Bitmap** 分别实现了 UV、DAU 的统计功能，节省了内存空间；

- 使用编程式事务和消息确认机制保证消息不丢失以及记录异常数据到MySQL；

- 使用Redis优化项目中对热点数据(登陆凭证、验证码、点赞、关注、用户数据等)的访问，提高数据的存取效率；

- 使用Kafka作为消息队列，在用户被点赞，评论，关注后，以系统通知的方式推送给用户，对此功能进行接口并加快上游接口响应速度。

- 针对每一笔交易生成一个唯一的订单号，防止因网络等原因导致重复支付，重复廿款，重复交易问题。

- 幂等性设计。。。

- 对于访问频繁⾼并且更新频率低的类似字典数据，采⽤双写⽅案将相关数据缓存⼊redis；

- 对于对于访问频率⾼、更新频率⼤，并且每条记录字段多的数据，开启mybatis⼆级缓存；

- 采⽤⼦查询及内连接优化深度分⻚，有效减少回表次数，有效提升深度分⻚场景下查询速率；为数据域字段建⽴前缀索引，有效提升数据域过滤速率

  ​



# 个人简历项目描述

## API网关

**项目介绍：**

面试官您好，这是我所设计和实现的一套统一《API网关》系统，该系统的核心目的是用于解决公司中所有各类服务的统一出口问题。将非业务功能的共性服务进行统一封装使用，这包括；鉴权、熔断、限流、风控、切量等。通过API网关可以将内部的 RPC 服务以及可扩展的 MQ、SQL、任务等资源，通过 HTTP 对外提供调用，让APP、WEB、H5、小程序等有一个统一标准的接入方式，降低公司在此同类功能模块的重复建设问题。

我作为项目的架构师和核心开发人员，在项目架构设计上，将工程拆分为Netty实现的核心通信模块、通信封装模块、通信引擎模块，以及注册中心、上报服务的SDK组件和后台管理系统。并通过 Nginx 动态负载驱动算力的集群使用，可以支持横向的扩展，满足高并发的接入。好的，面试者就是我做的API网关核心实现的介绍。

## [#](https://bugstack.cn/md/assembly/api-gateway/notes.html#%E4%BA%8C%E3%80%81%E7%AE%80%E5%8E%86%E6%A8%A1%E6%9D%BF)二、简历模板



> 你这个项目和 Spring Cloud 网关有什么区别？为什么使用你们的网关而不是用 Spring Cloud 的网关？

Spring Cloud 网关是一种微服务网关技术，主要提供路由、限流、鉴权、负载均衡等基本功能。相比于 API 网关，它更加专注于处理微服务之间的 HTTP 通信问题。

API 网关则是一种面向 API 接口的技术，提供 API 管理、鉴权、熔断、限流、路由等功能。

相比于 Spring Cloud 网关，API 网关更加适用于各类 RPC 通信的大型服务分布式系统架构。





> 如果我们的系统，想要使用你们的网关，需要哪些步骤？

首先服务需要有一定体量规模，微服务较多，RPC使用频繁。需要对 RPC 接口到 HTTP 的转换进行统一管理和对外发布 HTTP 协议接口。那么可以使用。使用时，看是那套 RPC 如果是 Dubbo 那么我们正好已经开发，只需要简单配置即可使用。但前提是需要在你们公司部署一套我们的 API网关系统





> API 网关的性能瓶颈在哪里？怎么优化？

API 网关主要的通信就在 `Netty通信` 模块，性能也主要耗费在这里。

最终的性能体现在：HTTP请求 -> 协议转换 -> 验证 -> 获取映射接口 -> 泛化调用，在这条链路上，可能发生的瓶颈点为：

1. 网络 I/O 性能：如果网关处理不当，会导致请求堆积、响应延迟等问题。可以通过优化网络 I/O 的方式来提高系统的性能，例如使用 Netty 的异步非阻塞模型，使用零拷贝技术等。
2. Dubbo 服务性能：API 网关主要作用是将 HTTP 请求转换为 Dubbo 泛化调用，因此 Dubbo 服务的性能也是一个关键因素。可以通过优化 Dubbo服务来提高系统的性能，例如使用 Dubbo 的异步调用、负载均衡【分布式部署多套】等
3. 线程池性能：API 网关需要处理大量请求，因此线程池的性能也是一个关键因素。如果线程池的参数设置不合理，会导致线程池过度消耗 CPU、内存等资源，从而影响系统的性能。可以通过优化线程池的方式来提高系统性能，例如设置合理的线程池大小、队列长度、拒绝策略等【尽量做到快速释放，超时时间设置好】
4. 内存使用：API 网关需要维护大量的链接和请求，因此要注意内存使用，否则可能导致内存泄漏、内存溢出等问题。可以使用内存池、避免创建过多对象来优化内存的使用





> 怎么实现网关的高可用？

通过多套网关算力的异地多机房部署，实现高可用。当有网关算力故障时，会自动下线



> 关于网关中 Nginx 的高可用

还可以使用 LVS 作为前端负载均衡器，将请求分发到 F5 负载上，再配置 Nginx 反向代理转发。

这样就可以利用 LVS 和 F5 的负载均衡和流量管理功能，让整个负载更加稳定可用。

小型系统，使用 Nginx 就够用了。



> 如果 RPC 服务上报过后协议改变了，网关如何进行处理？

网关与 RPC 的核心对接主要就是泛化调用。

如果协议改变，则需要根据最新协议调整泛化调用的代码。

这里可能需要兼容 RPC1.0、RPC2.0 对应不同的泛化调用，所以还需要策略模式



> 如何实现服务降级？

服务降级包括：限流、熔断、降级、切量、下线，都可以通过插件方式实现。在关联注册 RPC 接口时，启动对应的服务治理配置，在使用时，根据配置做相应的操作。如果降级，则返回对应的错误码。